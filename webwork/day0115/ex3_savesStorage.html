<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bitcamp17-502 study</title>
        <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Gaegu&family=Jua&family=Nanum+Pen+Script&family=Playwrite+AU+SA:wght@100..400&family=Single+Day&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body *{
                font-family: 'Jua';
            }
        </style>
        <script>
            window.onload = () => {
                let txt = document.querySelector("h3.message");
                let img = document.querySelector(".result>img");                

                /* 로컬 스토리지에서 값 가져오기 */
                let msg = localStorage.getItem("message");
                let color = localStorage.msgColor;
                let src = localStorage["src"];


                /* 시작 시 적용 */
                txt.innerHTML = msg;
                txt.style.color = color;

                img.setAttribute("src", src);

                /* 입력란에도 적용 */
                document.querySelector(".inpmsg").value = msg;
                document.querySelector(".fcolor").value = color;
                document.querySelector(".selImage").value = src;

            };
        </script>
    </head>
    <body>
    <div style="margin: 20px;">
        <div class="input-group" style="width: 450px;">
            <select class="selImage form-select">
                <option value="../mycar/mycar13.png">핑크자동차</option>
                <option value="../mycar/mycar11.png">노랑자동차</option>
                <option value="../mycar/mycar7.png">오렌지색자동차</option>
                <option value="../photo2/30.jpg">보라색머리띠</option>
            </select>
            &nbsp;&nbsp;
            <input type="color" class="fcolor form-control" />
            &nbsp;&nbsp;
            <input type="text" class="inpmsg form-control" placeholder="input message" />
        </div>
        <div class="result">
            <img src="../mycar/mycar13.png" width="300" />
            <h3 class="message" style="margin-top: 30px;">Input Message...</h3>
        </div>
    </div>

    <script>
        /* 변경된 값들을 localstorage에 저장 */
        /* 이미지 변경 */
        document.querySelector(".selImage").onchange = function () {
            document.querySelector(".result>img").setAttribute("src", this.value);
            localStorage["src"] = this.value;
        };

        /* 글자색 변경 */
        document.querySelector(".fcolor").onchange = function () {
            document.querySelector("h3.message").style.color = this.value;
            localStorage.setItem("msgColor", this.value);
        };

        /* 글자 입력 */
        document.querySelector(".inpmsg").onkeyup = function (e) {
            document.querySelector("h3.message").innerHTML = e.target.value;
            localStorage.message = e.target.value;
        };

    </script>
    </body>
</html>